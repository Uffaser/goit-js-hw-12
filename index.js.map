{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { PER_PAGE } from '../main';\n\nexport async function getImagesByQuery(query, page) {\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: '53361036-d6c3e8b24991f3de089666c85',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: PER_PAGE,\n            page: page,\n        },\n    });\n\n    return response.data;\n}\n","import { refs } from '../main';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.gallery-item a');\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            image =>\n                `<li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <div class=\"gallery-desc-box\">\n                <p class=\"gallery-desc-title\">Likes\n                    <span class=\"gallery-desc\">${image.likes}</span></p>\n                <p class=\"gallery-desc-title\">Views\n                    <span class=\"gallery-desc\">${image.views}</span></p>\n                <p class=\"gallery-desc-title\">Comments\n                    <span class=\"gallery-desc\">${image.comments}</span></p>\n                <p class=\"gallery-desc-title\">Downloads\n                    <span class=\"gallery-desc\">${image.downloads}</span></p>\n            </div>\n        </li>`\n        )\n        .join('');\n\n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n\n    gallery.options.captionsData = 'alt';\n    gallery.refresh();\n}\n\nexport function clearGallery() {\n    refs.galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    refs.loader.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    refs.loadMore.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    refs.loadMore.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    clearGallery,\n    createGallery,\n    hideLoader,\n    hideLoadMoreButton,\n    showLoader,\n    showLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n    form: document.querySelector('.form'),\n    galleryList: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMore: document.querySelector('.more-btn'),\n};\n\nexport const PER_PAGE = 15;\n\nlet userQuery;\nlet page = 1;\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const searchText = e.target.elements.search.value.trim();\n\n    userQuery = searchText;\n\n    if (!searchText) {\n        iziToast.error({\n            message: 'The input field is empty. Please enter your query !',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n\n    if (page >= 1) {\n        hideLoadMoreButton();\n        page = 1;\n    }\n\n    try {\n        const data = await getImagesByQuery(searchText, page);\n\n        const images = data.hits;\n\n        if (images.length === 0) {\n            iziToast.error({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            createGallery(images);\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(error);\n\n        iziToast.error({\n            message: `Sorry! We can't find that page. It may have been deleted or moved.`,\n            position: 'topRight',\n        });\n    }\n\n    hideLoader();\n\n    refs.form.reset();\n});\n\nrefs.loadMore.addEventListener('click', async () => {\n    hideLoadMoreButton();\n    showLoader();\n\n    page++;\n\n    try {\n        const data = await getImagesByQuery(userQuery, page);\n\n        const images = data.hits;\n\n        if (images.length === 0) {\n            iziToast.error({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            createGallery(images);\n            showLoadMoreButton();\n        }\n\n        const cardSize =\n            refs.galleryList.firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardSize.height * 2,\n            behavior: 'smooth',\n        });\n\n        const totalHits = data.totalHits;\n        const totalPages = Math.ceil(totalHits / PER_PAGE);\n\n        if (page === totalPages) {\n            iziToast.info({\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'topRight',\n            });\n            hideLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(error);\n\n        iziToast.error({\n            message: `Sorry! We can't find that page. It may have been deleted or moved.`,\n            position: 'topRight',\n        });\n    }\n\n    hideLoader();\n});\n"],"names":["getImagesByQuery","query","page","axios","PER_PAGE","gallery","SimpleLightbox","createGallery","images","markup","image","refs","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","userQuery","e","searchText","iziToast","error","data","cardSize","totalHits","totalPages"],"mappings":"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"}